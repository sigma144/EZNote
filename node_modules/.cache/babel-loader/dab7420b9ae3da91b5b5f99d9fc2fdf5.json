{"ast":null,"code":"import _classCallCheck from \"/root/eznote/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/eznote/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/root/eznote/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/root/eznote/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/root/eznote/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/root/eznote/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Button from './Button.js';\nimport Staff from './images/staff.png';\nimport Popup from './Popup.js';\nimport { Link } from 'react-router-dom';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.setSelectedNote = function (selected) {\n      _this.setState({\n        note: selected\n      });\n    };\n\n    _this.setClef = function (selected) {\n      _this.setState({\n        clef: selected,\n        clefpop: false,\n        note: selected\n      });\n    };\n\n    _this.setTime = function (selected) {\n      _this.setState({\n        time: selected,\n        timepop: false,\n        note: selected\n      });\n    };\n\n    _this.clearIntro = function () {\n      _this.setState(function (prevState, props) {\n        return {\n          intropop: false\n        };\n      });\n    };\n\n    _this.getNoteX = function (note, x) {\n      if (x < 0) return -100;\n      return Math.round((x * 12 + 30) * window.innerWidth / 1000);\n    };\n\n    _this.getNoteY = function (note, y) {\n      return Math.round((y * 6.6 - (_this.isAcc(note) ? 44 : 47)) * window.innerWidth / 1000 + 100);\n    };\n\n    _this.state = {\n      mx: 0,\n      my: 0,\n      x: 0,\n      y: 0,\n      nx: -100,\n      ny: -100,\n      note: \"quarter\",\n      speed: \"100\",\n      allnotes: [],\n      measure: 0,\n      notes: [undefined, {\n        note: \"treble\",\n        x: 1,\n        y: 22\n      }, undefined, {\n        note: \"44\",\n        x: 3,\n        y: 22\n      }],\n      intropop: true,\n      clefpop: true,\n      timepop: true,\n      keypop: true,\n      clef: \"treble\",\n      time: \"44\"\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"saveMeasures\",\n    value: function saveMeasures() {\n      for (var i = 0; i < 75; i++) {\n        if (this.state.notes[i] !== undefined) this.state.notes[i].x = i + this.state.measure * 25;\n        this.state.allnotes[i + this.state.measure * 25] = this.state.notes[i];\n      }\n\n      this.forceUpdate();\n    }\n  }, {\n    key: \"loadMeasures\",\n    value: function loadMeasures() {\n      for (var i = 0; i < 75; i++) {\n        this.state.notes[i] = this.state.allnotes[i + this.state.measure * 25];\n        if (this.state.notes[i] !== undefined) this.state.notes[i].x = i;\n      }\n\n      this.forceUpdate();\n    }\n  }, {\n    key: \"incMeasure\",\n    value: function incMeasure() {\n      this.saveMeasures();\n      this.state.measure++;\n      this.loadMeasures();\n    }\n  }, {\n    key: \"decMeasure\",\n    value: function decMeasure() {\n      this.saveMeasures();\n      if (this.state.measure > 0) this.state.measure--;\n      this.loadMeasures();\n    }\n  }, {\n    key: \"showClefPopup\",\n    value: function showClefPopup() {\n      this.setState(function (prevState, props) {\n        return {\n          clefpop: true\n        };\n      });\n    }\n  }, {\n    key: \"hideClefPopup\",\n    value: function hideClefPopup() {\n      this.setState(function (prevState, props) {\n        return {\n          clefpop: false\n        };\n      });\n    }\n  }, {\n    key: \"showTimePopup\",\n    value: function showTimePopup() {\n      this.setState(function (prevState, props) {\n        return {\n          timepop: true\n        };\n      });\n    }\n  }, {\n    key: \"hideTimePopup\",\n    value: function hideTimePopup() {\n      this.setState(function (prevState, props) {\n        return {\n          timepop: false\n        };\n      });\n    }\n  }, {\n    key: \"isAcc\",\n    value: function isAcc(note) {\n      return note === \"flat\" || note === \"sharp\" || note === \"natural\";\n    }\n  }, {\n    key: \"isClef\",\n    value: function isClef(note) {\n      return note === \"treble\" || note === \"bass\" || note === \"treble8\";\n    }\n  }, {\n    key: \"isTime\",\n    value: function isTime(note) {\n      return note.length === 2;\n    }\n  }, {\n    key: \"rerender\",\n    value: function rerender() {\n      this.forceUpdate();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener(\"resize\", this.rerender.bind(this));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"resize\", this.rerender.bind(this));\n    }\n  }, {\n    key: \"_onMouseMove\",\n    value: function _onMouseMove(e) {\n      this.setState({\n        mx: Math.round(e.pageX / window.innerWidth * 1000),\n        my: Math.round((e.pageY - 70) / window.innerWidth * 1000),\n        x: Math.round((this.state.mx - 47) / 12),\n        y: this.state.note[0] === \"r\" ? 23 : this.isTime(this.state.note) || this.isClef(this.state.note) ? 22 : this.isAcc(this.state.note) ? Math.round(this.state.my / 6.6) + 4 : this.state.note === \"whole\" ? Math.round(this.state.my / 6.6) + 5 : Math.round(this.state.my / 6.6),\n        nx: this.state.my < 20 || this.state.my > 220 || this.state.mx < 55 || this.state.mx > 940 ? -100 : this.getNoteX(this.state.note, this.state.x),\n        ny: this.state.my < 20 || this.state.my > 220 || this.state.mx < 55 || this.state.mx > 940 ? -100 : this.getNoteY(this.state.note, this.state.y)\n      });\n      /*\n      if (!isNaN(parseInt(this.state.note[0]))) {\n        this.setState({x: Math.round((this.state.x / 15) * 15 + 5),\n         nx: (this.state.my < 20 || this.state.my > 220) ? -100 :\n                          this.getNoteX(this.state.x)\n       })\n        console.log(this.state.x)\n      }*/\n    }\n  }, {\n    key: \"_onMouseDown\",\n    value: function _onMouseDown(e) {\n      if (this.state.nx < 0 || this.state.ny < 0) return;\n      if (this.state.clefpop || this.state.timepop) return;\n      var curNote = this.state.notes[this.state.x];\n\n      if (this.state.note === \"x\") {\n        this.state.notes[this.state.x] = undefined;\n      } else if (curNote === undefined || !(curNote.y === this.state.y && curNote.note === this.state.note)) {\n        this.state.notes[this.state.x] = {\n          note: this.state.note,\n          x: this.state.x,\n          y: this.state.y\n        };\n      } else {\n        this.state.notes[this.state.x] = undefined;\n      }\n\n      this.forceUpdate();\n    }\n  }, {\n    key: \"renderNotes\",\n    value: function renderNotes() {\n      var notes = [];\n      var barnote = undefined;\n\n      for (var i = 0; i < this.state.notes.length; i++) {\n        var note = this.state.notes[i];\n        if (note === undefined) continue;\n        notes.push(React.createElement(\"img\", {\n          className: \"note\",\n          src: require(\"./images/\" + note.note + \".png\"),\n          alt: \"\",\n          style: {\n            left: this.getNoteX(note.note, note.x) + \"px\",\n            top: this.getNoteY(note.note, note.y) + \"px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }));\n\n        if (note.note === \"barnote\") {\n          if (barnote === undefined) barnote = note;else {\n            var bx1 = this.getNoteX(barnote.note, barnote.x) + Math.round(26 * window.innerWidth / 1000);\n            var bx2 = this.getNoteX(note.note, note.x) + Math.round(26 * window.innerWidth / 1000);\n            var by1 = this.getNoteY(barnote.note, barnote.y) + Math.round(5 * window.innerWidth / 1000);\n            var by2 = this.getNoteY(note.note, note.y) + Math.round(5 * window.innerWidth / 1000);\n            var minx = Math.min(bx1, bx2);\n            var miny = Math.min(by1, by2) - Math.round(10 * window.innerWidth / 1000);\n            var dx = Math.abs(bx2 - bx1);\n            var dy = Math.abs(by2 - by1) + Math.round(20 * window.innerWidth / 1000);\n            notes.push(React.createElement(\"svg\", {\n              width: dx,\n              height: dy,\n              style: {\n                left: minx,\n                top: miny\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 170\n              },\n              __self: this\n            }, React.createElement(\"line\", {\n              x1: bx1 - minx,\n              y1: by1 - miny,\n              x2: bx2 - minx,\n              y2: by2 - miny,\n              stroke: \"black\",\n              strokeWidth: \"0.5vw\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 171\n              },\n              __self: this\n            })));\n            barnote = undefined;\n          }\n        } else barnote = undefined;\n      }\n\n      return notes;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        onMouseMove: this._onMouseMove.bind(this),\n        onMouseDown: this._onMouseDown.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"mnumber\",\n        style: {\n          left: \"5vw\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, this.state.measure + 1), React.createElement(\"p\", {\n        className: \"mnumber\",\n        style: {\n          left: \"35vw\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, this.state.measure + 2), React.createElement(\"p\", {\n        className: \"mnumber\",\n        style: {\n          left: \"65vw\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, this.state.measure + 3), React.createElement(\"p\", {\n        className: \"mnumber\",\n        style: {\n          left: \"95vw\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, this.state.measure + 4), React.createElement(\"img\", {\n        id: \"staff\",\n        src: Staff,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        id: \"leftbutton\",\n        className: \"scrollButton\",\n        type: \"button\",\n        onClick: this.decMeasure.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"\\u25C4\"), React.createElement(\"button\", {\n        id: \"rightbutton\",\n        className: \"scrollButton\",\n        type: \"button\",\n        onClick: this.incMeasure.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"\\u25BA\"), React.createElement(\"img\", {\n        id: \"indicator\",\n        src: require(\"./images/\" + this.state.note + \".png\"),\n        alt: \"\",\n        style: {\n          left: this.state.nx + \"px\",\n          top: this.state.ny + \"px\",\n          visibility: this.state.note === \"x\" ? \"hidden\" : \"visible\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), this.renderNotes(), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"playback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        id: \"playbutton\",\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Play \\u25BA\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Speed (bpm):\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"sbutton\",\n        id: \"speed-\",\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"-\"), React.createElement(\"input\", {\n        id: \"speedinput\",\n        type: \"text\",\n        name: \"speed\",\n        defaultValue: \"100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"sbutton\",\n        id: \"speed+\",\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, \"+\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        id: \"notes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(Button, {\n        image: \"quarter\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"eighth\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"half\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"eighthbar\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"quarterdot\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"halfdot\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"whole\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"rquarter\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"reighth\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"rhalf\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"flat\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"sharp\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"natural\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: \"x\",\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"select\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(Button, {\n        image: this.state.clef,\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        size: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), React.createElement(Button, {\n        image: this.state.time,\n        selected: this.state.note,\n        callback: this.setSelectedNote,\n        size: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"cbutton\",\n        type: \"button\",\n        onClick: this.showClefPopup.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \"Change\"), React.createElement(\"button\", {\n        className: \"cbutton\",\n        type: \"button\",\n        onClick: this.showTimePopup.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Change\"), this.state.timepop ? React.createElement(Popup, {\n        type: \"time\",\n        begin: this.state.keypop,\n        callback: this.state.begin ? this.setTime : this.setTime,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }) : React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }), this.state.clefpop ? React.createElement(Popup, {\n        type: \"clef\",\n        begin: this.state.keypop,\n        callback: this.state.begin ? this.setClef : this.setClef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }) : React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), this.state.intropop ? React.createElement(Popup, {\n        type: \"intro\",\n        callback: this.state.begin ? this.setIntro : this.clearIntro,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }) : React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/root/eznote/src/App.js"],"names":["React","Component","Button","Staff","Popup","Link","App","setSelectedNote","selected","setState","note","setClef","clef","clefpop","setTime","time","timepop","clearIntro","prevState","props","intropop","getNoteX","x","Math","round","window","innerWidth","getNoteY","y","isAcc","state","mx","my","nx","ny","speed","allnotes","measure","notes","undefined","keypop","i","forceUpdate","saveMeasures","loadMeasures","length","addEventListener","rerender","bind","removeEventListener","e","pageX","pageY","isTime","isClef","curNote","barnote","push","require","left","top","bx1","bx2","by1","by2","minx","min","miny","dx","abs","dy","_onMouseMove","_onMouseDown","decMeasure","incMeasure","visibility","renderNotes","showClefPopup","showTimePopup","begin","setIntro"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './App.css'\nimport Button from './Button.js'\nimport Staff from './images/staff.png'\nimport Popup from './Popup.js'\nimport {Link} from 'react-router-dom'\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {mx: 0, my: 0, x: 0, y: 0, nx: -100, ny: -100,\n\t\t  note: \"quarter\", speed: \"100\",\n\t\t  allnotes: [],\n\t\t  measure: 0,\n\t\t  notes: [undefined, {note:\"treble\",x:1,y:22},\n\t\t\t  undefined, {note:\"44\",x:3,y:22}],\n\t\t  intropop: true,\n\t\t  clefpop: true,\n\t\t  timepop: true,\n\t\t  keypop: true,\n\t\t  clef: \"treble\",\n\t\t  time: \"44\",\n\t \t  };\n  }\n  setSelectedNote = (selected) => {\n    this.setState({note: selected})\n  }\n  setClef = (selected) => {\n    this.setState({ clef: selected, clefpop: false, note: selected})\n  }\n  setTime = (selected) => {\n    this.setState({ time: selected, timepop: false, note: selected})\n  }\n  clearIntro = () => {\n    this.setState((prevState, props) => {return { intropop: false }})\n  }\n  saveMeasures() {\n    for (let i = 0; i < 75; i++) {\n      if (this.state.notes[i] !== undefined)\n\tthis.state.notes[i].x = i + this.state.measure*25;\n      this.state.allnotes[i + this.state.measure*25] = this.state.notes[i]\n    }\n    this.forceUpdate()\n  }\n  loadMeasures() {\n    for (let i = 0; i < 75; i++) {\n      this.state.notes[i] = this.state.allnotes[i + this.state.measure*25]\n      if (this.state.notes[i] !== undefined)\n        this.state.notes[i].x = i;\n    }\n    this.forceUpdate()\n  }\n  incMeasure() {\n\tthis.saveMeasures();\n\tthis.state.measure++;\n\tthis.loadMeasures();\n  }\n  decMeasure() {\n\tthis.saveMeasures();\n\tif (this.state.measure > 0) this.state.measure--;\n\tthis.loadMeasures();\n  }\n  showClefPopup() {\n    this.setState((prevState, props) => {return {clefpop: true}})\n  }\n  hideClefPopup() {\n    this.setState((prevState, props) => {return {clefpop: false}})\n  }\n  showTimePopup() {\n    this.setState((prevState, props) => {return {timepop: true}})\n  }\n  hideTimePopup() {\n    this.setState((prevState, props) => {return {timepop: false}})\n  }\n  isAcc(note) {\n    return note === \"flat\" || note === \"sharp\" || note === \"natural\"\n  }\n  isClef(note) {\n    return note === \"treble\" || note === \"bass\" || note === \"treble8\"\n  }\n  isTime(note) {\n    return note.length === 2\n  }\n  getNoteX = (note, x) => {\n    if (x < 0) return -100\n    return Math.round((x * 12 + 30) * window.innerWidth / 1000)\n  }\n  getNoteY = (note, y) => {\n    return Math.round((y * 6.6 - (this.isAcc(note) ? 44 : 47)) * window.innerWidth / 1000 + 100)\n  }\n  rerender() {\n    this.forceUpdate()\n  }\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.rerender.bind(this));\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.rerender.bind(this));\n  }\n  _onMouseMove(e) {\n    this.setState({ mx: Math.round(e.pageX / window.innerWidth * 1000),\n\t\t    my: Math.round((e.pageY - 70) / window.innerWidth * 1000),\n\t\t    x: Math.round((this.state.mx - 47) / 12),\n\t\t    y: (this.state.note[0] === \"r\" ? 23 :\n\t\t\tthis.isTime(this.state.note) ||\n\t\t\tthis.isClef(this.state.note) ? 22 :\n\t\t\tthis.isAcc(this.state.note) ?\n\t\t\tMath.round(this.state.my / 6.6) + 4 :\n\t\t\tthis.state.note === \"whole\" ?\n                        Math.round(this.state.my / 6.6) + 5 :\n\t\t\tMath.round(this.state.my / 6.6)),\n\t\t    nx: (this.state.my < 20 || this.state.my > 220 ||\n\t\t\t this.state.mx < 55 || this.state.mx > 940) ? -100 :\n\t\t\tthis.getNoteX(this.state.note, this.state.x),\n\t\t    ny: (this.state.my < 20 || this.state.my > 220 ||\n\t\t\t this.state.mx < 55 || this.state.mx > 940) ? -100 :\n\t\t\tthis.getNoteY(this.state.note, this.state.y)\n\t\t})\n    /*\n    if (!isNaN(parseInt(this.state.note[0]))) {\n      this.setState({x: Math.round((this.state.x / 15) * 15 + 5),\n\t\t     nx: (this.state.my < 20 || this.state.my > 220) ? -100 :\n                        this.getNoteX(this.state.x)\n\t\t   })\n      console.log(this.state.x)\n    }*/\n  }\n  _onMouseDown(e) {\n    if (this.state.nx < 0 || this.state.ny < 0) return\n    if (this.state.clefpop || this.state.timepop) return\n    let curNote = this.state.notes[this.state.x]\n    if (this.state.note === \"x\") {\n      this.state.notes[this.state.x] = undefined\n    }\n    else if (curNote === undefined || !(curNote.y === this.state.y &&\n\t\t\t\t   curNote.note === this.state.note)) {\n      this.state.notes[this.state.x] =\n\t  {note:this.state.note, x:this.state.x, y:this.state.y}\n    }\n    else {\n      this.state.notes[this.state.x] = undefined\n    }\n    this.forceUpdate()\n  }\n  renderNotes() {\n    let notes = []\n    let barnote = undefined\n    for (let i = 0; i < this.state.notes.length; i++) {\n      let note = this.state.notes[i]\n      if (note === undefined) continue\n      notes.push(<img className=\"note\"\n            src={require(\"./images/\" + note.note + \".png\")} alt=\"\"\n            style={{left: this.getNoteX(note.note, note.x) + \"px\",\n                    top: this.getNoteY(note.note, note.y) + \"px\"}}/>)\n      if (note.note === \"barnote\") {\n        if (barnote === undefined) barnote = note\n        else {\n\t  let bx1 = this.getNoteX(barnote.note, barnote.x) +\n\t\tMath.round(26 * window.innerWidth / 1000)\n\t  let bx2 = this.getNoteX(note.note, note.x) +\n\t\tMath.round(26 * window.innerWidth / 1000)\n\t  let by1 = this.getNoteY(barnote.note, barnote.y) +\n\t\tMath.round(5 * window.innerWidth / 1000)\n          let by2 = this.getNoteY(note.note, note.y) +\n\t\tMath.round(5 * window.innerWidth / 1000);\n\t  let minx = Math.min(bx1, bx2)\n\t  let miny = Math.min(by1, by2)-Math.round(10 * window.innerWidth / 1000)\n\t  let dx = Math.abs(bx2 - bx1)\n\t  let dy = Math.abs(by2 - by1)+Math.round(20 * window.innerWidth / 1000)\n\t  notes.push(<svg width={dx} height={dy} style={{left: minx, top: miny}}>\n\t\t<line x1={bx1-minx} y1={by1-miny} x2={bx2-minx} y2={by2-miny}\n\t\tstroke=\"black\" strokeWidth=\"0.5vw\"/></svg>)\n\t  barnote = undefined\n        }\n      }\n      else barnote = undefined\n    }\n    return notes\n  }\n  render() {\n    return (\n      <div className=\"App\" onMouseMove={this._onMouseMove.bind(this)}\n\tonMouseDown={this._onMouseDown.bind(this)}>\n\t<div id=\"body\">\n\t  <p className=\"mnumber\" style={{left: \"5vw\"}}>\n\t    {this.state.measure+1}</p>\n\t  <p className=\"mnumber\" style={{left: \"35vw\"}}>\n\t    {this.state.measure+2}</p>\n\t  <p className=\"mnumber\" style={{left: \"65vw\"}}>\n\t    {this.state.measure+3}</p>\n\t  <p className=\"mnumber\" style={{left: \"95vw\"}}>\n            {this.state.measure+4}</p>\n\t  <img id=\"staff\" src={Staff} alt=\"\" />\n\t  <button id=\"leftbutton\" className=\"scrollButton\" type=\"button\"\n\t    onClick={this.decMeasure.bind(this)}\n\t    >&#x25c4;</button>\n\t  <button id=\"rightbutton\" className=\"scrollButton\" type=\"button\"\n\t    onClick={this.incMeasure.bind(this)}>\n            &#x25ba;</button>\n\t  <img id=\"indicator\"\n\t    src={require(\"./images/\" + this.state.note + \".png\")} alt=\"\"\n\t    style={{left: this.state.nx + \"px\", top: this.state.ny + \"px\",\n\t\t    visibility: (this.state.note === \"x\" ? \"hidden\" : \"visible\")}}/>\n\t  {this.renderNotes()}\n\t  <div>\n\t    <form id=\"playback\">\n\t      <button id=\"playbutton\" type=\"button\">Play &#x25ba;</button>\n\t      <p>Speed (bpm):</p>\n\t      <div>\n\t\t<button className=\"sbutton\" id=\"speed-\" type=\"button\">-</button>\n\t        <input id=\"speedinput\" type=\"text\" name=\"speed\" defaultValue=\"100\" />\n\t\t<button className=\"sbutton\" id=\"speed+\" type=\"button\">+</button>\n\t\t<br/>\n\t      </div>\n\t    </form>\n\t    <div id=\"notes\">\n\t      <Button image=\"quarter\" selected={this.state.note}\n\t\tcallback={this.setSelectedNote}/>\n              <Button image=\"eighth\" selected={this.state.note}\n\t\tcallback={this.setSelectedNote}/>\n              <Button image=\"half\" selected={this.state.note}\n\t\tcallback={this.setSelectedNote}/>\n\t      <Button image=\"eighthbar\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n\t      <Button image=\"quarterdot\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n\t      <Button image=\"halfdot\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n\t      <Button image=\"whole\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n\n\t      <Button image=\"rquarter\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n\t      <Button image=\"reighth\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n              <Button image=\"rhalf\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n              <Button image=\"flat\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n              <Button image=\"sharp\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n\t      <Button image=\"natural\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n\t      <Button image=\"x\" selected={this.state.note}\n                callback={this.setSelectedNote}/>\n\t    </div>\n\t    <div id=\"select\">\n              <Button image={this.state.clef} selected={this.state.note}\n                callback={this.setSelectedNote} size=\"8\"></Button>\n              <Button image={this.state.time} selected={this.state.note}\n                callback={this.setSelectedNote} size=\"8\"></Button>\n\t      <button className=\"cbutton\" type=\"button\"\n\t\tonClick={this.showClefPopup.bind(this)}>Change</button>\n\t      <button className=\"cbutton\" type=\"button\"\n\t\tonClick={this.showTimePopup.bind(this)}>Change</button>\n\t      {this.state.timepop ? <Popup type=\"time\" begin={this.state.keypop}\n                callback={this.state.begin ? this.setTime : this.setTime}/> : <p/>}\n\t      {this.state.clefpop ? <Popup type=\"clef\" begin={this.state.keypop}\n\t\tcallback={this.state.begin ? this.setClef : this.setClef}/> : <p/>}\n\t      {this.state.intropop ? <Popup type=\"intro\"\n                callback={this.state.begin ? this.setIntro : this.clearIntro}/> : <p/>}\n            </div>\n\t  </div>\n\t</div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}